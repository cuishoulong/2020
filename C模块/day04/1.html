<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

</body>

</html>
<script>
    // "use strict";
    // setTimeout(function(){console.log(this)},1000);




    var a = "lalala";
    var obj = {
        a: "java",
        prop: {
            fn: function () {
                return this.a;
            }
        }
    }
    console.log(obj.prop.fn());
    var res = obj.prop.fn;
    console.log(res());


    var name = "window";
    var tom = {
        name: "tom",
        // show: function () {
        //     console.log(this.name);
        // },
        wait: function () {
            var fun = function () {
            console.log(this.name);
        };
            fun();
        }
    }
    tom.wait.fun();//undefied


    var a = 1;
    var obj1 = {
        a: 0,  
        fn1: (function (a) { 
            this.a = a;   
            a++;
            return function () {
                this.a = a++;
                console.log(a)
            }
        })(a)
    };
    obj1.fn1();  
    var fn1 = obj1.fn1;   
    fn1();  
    console.log(a);console.log(obj1.a);

var a = 3;
    var obj1 = {
        a: 2,  
        fn1: (function (a) { 
    //形参赋值a=4
            this.a = a;   
            a++;
            return function () {
                this.a = a++;
                console.log(a)//4
            }
        })(a)
    };
    obj1.fn1(); //3 
    var fn1 = obj1.fn1;   
    fn1();  //4
    console.log(a);console.log(obj1.a);//3 2

var num =1;  
    var obj = {
        num : 2,
        fn : (function () {
            this.num *= 2;
            num +=3;
            var num =1;
            return function () {
                    num +=2;
                    this.num +=2
                    console.log(++num);
            }
        })()
    };
    var f= obj.fn;
f();
obj.fn();
console.log(window.num,obj.num);

var num =4;  
    var obj = {
        num : 4,
        fn : (function () {
    //变量提升 num=7
            this.num *= 2;
            num +=3;
            var num =1;
            return function () {
                    num +=2;
                    this.num +=2
                    console.log(++num);
            }
        })()
    };
    var f= obj.fn;
f();//4
obj.fn();//7
console.log(window.num,obj.num);


var num = 10; 
    var obj = {num: 15};
    obj.fn = (function (num) {
        
        this.num += 10;
        num *= 2;
        return function (n) {
            this.num += n;
            console.log(n + (--num));
        }
    })(obj.num);
    var fn = obj.fn;
    fn(10);  
    obj.fn(15);
    console.log(window.num, obj.num);

var num = 30; 
    var obj = {num: 30};
    obj.fn = (function (num) {
        //形参num =28
        this.num += 10;
        num *= 2;
        return function (n) {
    //形参赋值n=15
            this.num += n;
            console.log(n + (--num));
        }
    })(obj.num);
    var fn = obj.fn;
    fn(10); //39 
    obj.fn(15);//43
    console.log(window.num, obj.num);//30 30

    window.val=1;
    var json={
        val:10,
        dbl:function(){
            this.val*=2;
        }
    }
    json.dbl();
    var dbl=json.dbl;
    dbl();
    json.dbl.call(window);
    alert(window.val+json.val);

    window.val=4;
    var json={
        val:20,
        dbl:function(){
            this.val*=2;
        }
    }
    json.dbl();
    var dbl=json.dbl;
    dbl();
    json.dbl.call(window);
    alert(window.val+json.val);

    (function(){
        var val=1;
        var json={
            val:10,
            dbl:function(){
                val*=2;
            }
        }
        json.dbl();
        alert(json.val+val);
    })()







    
    (function(){
        var val=1;
        var json={
            val:20,
            dbl:function(){
                val*=2;
            }
        }
        json.dbl();
        alert(json.val+val);
    })()
</script>